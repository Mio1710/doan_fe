import{d as $,r as f,a as g,t as k,L as P,A as o,x as i,B as v,z as l,M as m,N as w,V as x,O as S,i as V,S as C,v as b,P as T,Q as h,R as q,y}from"./C5o3XgM8.js";import{V as z,s as N}from"./B4KhIMNU.js";import{_ as A}from"./BQ-m9GLv.js";import{_ as B}from"./GQ_XKnWl.js";import{P as Q,_ as I}from"./DZ_F3gcz.js";import{V as D}from"./DSXWEGHE.js";import{V as F}from"./BGMHy2BI.js";import{V as L}from"./BucRdiyx.js";import"./ClqTeD8V.js";import"./Qrp8M8cl.js";import"./DKVj5txg.js";import"./Cuta4Q8k.js";import"./CkMhjDa3.js";import"./C9IY8SFK.js";const O={class:"mt-4"},R={class:"max-w-[520px] ma-auto d-flex"},U={class:"d-none"},W=$({__name:"ImportStudentIntern",emits:["cancel"],setup(s,{emit:u}){const t=f(null),{$api:r,$toast:c}=g(),p=u,a=()=>{r.studentIntern.importStudentIntern(N.serialize({file:t.value})).then(()=>{c.success("Import sinh viên thực tập thành công"),p("cancel")})},d=()=>{console.log("Preview")};return(_,e)=>(k(),P(A,{"can-cancel":"","cancel-text":"Hủy",title:"Import sinh viên thực tập",onCancel:e[2]||(e[2]=n=>p("cancel")),onSubmit:a},{default:o(()=>[e[4]||(e[4]=i("div",{class:"mt-5"},[v(" Tải xuống mẫu import dữ liệu: "),i("a",{download:"",href:"/files/student_intern_template.xlsx",target:"_blank"},"download")],-1)),i("div",O,[i("div",R,[l(z,{modelValue:m(t),"onUpdate:modelValue":e[0]||(e[0]=n=>w(t)?t.value=n:null),accept:".xlsx",class:"w-full mr-4",label:"File dữ liệu",variant:"outlined"},null,8,["modelValue"]),i("div",U,[l(B,{modelValue:m(t),"onUpdate:modelValue":e[1]||(e[1]=n=>w(t)?t.value=n:null),rules:"required"},null,8,["modelValue"])]),l(x,{color:"success",disabled:!m(t),onClick:d},{default:o(()=>e[3]||(e[3]=[v("Xem trước")])),_:1},8,["disabled"])])])]),_:1}))}});function E(s,u){return s?Array.isArray(s)?I.map(I.zip(s,u),([t,r])=>r==="desc"?`-${t}`:t):[u==="desc"?`-${s}`:s]:[]}function G(s,u){const{$api:t}=g(),r=S(["student-intern",s],()=>{const{sortBy:a,sortType:d}=s.value,_=E(a,d),e=new Q({includes:[],appends:[],fields:{},filters:{},sorts:_,page:s.value.page,limit:s.value.rowsPerPage,payload:null,...s.value}).query();return t.studentIntern.getStudentInterns(e)},{refetchOnWindowFocus:!1,...u}),c=V(()=>{var a;return((a=r.data.value)==null?void 0:a.data)||[]}),p=V(()=>{var a,d;return((d=(a=r.data.value)==null?void 0:a.pagination)==null?void 0:d.total)||0});return{...r,items:c,totalItems:p}}const H={class:"d-flex flex-column flex-grow-1 h-full"},M={class:"d-flex items-center"},X={class:"mt-2"},de=$({__name:"student-company",setup(s){f(!1),f("");const u=[{title:"STT",align:"center",sortable:!1,key:"index",width:50},{title:"Tên sinh viên",key:"ten"},{title:"Lớp",key:"lop",width:"15%",minWidth:150},{title:"",key:"action",width:30}],t=f({page:1,rowsPerPage:100,sortBy:"-created_at",sortType:"asc"}),r=V(()=>({...t.value}));g(),C();const{items:c,totalItems:p,isLoading:a,refetch:d}=G(r);return(_,e)=>(k(),b("div",H,[e[4]||(e[4]=i("div",{class:"text-lg font-bold text-uppercase"},"Quản lý sinh viên thực tập",-1)),l(D,{class:"pa-3 h-full",color:"white",variant:"flat"},{default:o(()=>[i("div",M,[l(F,{"min-width":"400",width:"40%"},{activator:o(({props:n})=>[l(x,T({color:"success",size:"small"},n),{default:o(()=>[l(h,null,{default:o(()=>e[1]||(e[1]=[v("mdi-plus")])),_:1}),e[2]||(e[2]=i("span",null,"Import",-1))]),_:2},1040)]),default:o(({isActive:n})=>[l(W,{onCancel:j=>n.value=!1},null,8,["onCancel"])]),_:1}),l(q),l(x,{icon:"",size:"x-small",variant:"text",onClick:e[0]||(e[0]=n=>m(d)())},{default:o(()=>[l(h,null,{default:o(()=>e[3]||(e[3]=[v("mdi-refresh")])),_:1})]),_:1})]),i("div",X,[l(L,{headers:u,"hide-default-footer":"",items:m(c),loading:m(a)},{"item.index":o(({index:n})=>[i("span",null,y(n+1),1)]),"item.ten":o(({item:n})=>[i("span",null,y(n.hodem+" "+n.ten),1)]),_:1},8,["items","loading"])])]),_:1})]))}});export{de as default};
