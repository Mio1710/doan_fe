import{_ as W}from"./CEn-oV8-.js";import{f as k}from"./D-3jeY6D.js";import{d as B,r as h,a as q,P as N,t as v,L as A,A as i,z as l,M as n,i as z,Z as D,v as M,x as s,R as T,Q as C,V as b,B as $,S as P,y as d,T as Q}from"./CxV_Dxxn.js";import{_ as K}from"./DVzIeaiQ.js";import{_ as p}from"./BCDa8zFl.js";import{_ as Y}from"./DLXGiVGS.js";import{u as G}from"./Dg3aWG5r.js";import{V as H}from"./D9m4qXwV.js";import{V as S}from"./DreylGMB.js";import{V as I}from"./BPh3sONN.js";import{V as L}from"./CqPYvuAF.js";import{V as O}from"./AahRbdbK.js";import"./21Ff1hpv.js";import"./CbRwnlxE.js";import"./DZ_F3gcz.js";import"./D5oQ8_wC.js";import"./tDQ8zurw.js";import"./BBbuQq7v.js";import"./CMVbaI4E.js";const j=B({__name:"UpdateTopic",props:{topic:{type:Object,required:!0}},emits:["cancel"],setup(_,{emit:c}){const a=h({..._.topic}),{$api:f,$toast:V}=q(),m=c,w=N(),x=()=>{a.value.status!=="approved"&&(a.value.status="pending"),f.topic.updateTopic(a.value.id,a.value).then(()=>{V.success("Tạo đề tài thành công"),w.invalidateQueries("topic"),m("cancel")})};return(U,o)=>(v(),A(K,{"can-cancel":"","cancel-text":"Hủy",title:"Cập nhật đề tài",onCancel:o[4]||(o[4]=t=>m("cancel")),onSubmit:x},{default:i(()=>[l(p,{modelValue:n(a).ten,"onUpdate:modelValue":o[0]||(o[0]=t=>n(a).ten=t),label:"Tên đề tài",name:"Tên đề tài",rules:"required"},null,8,["modelValue"]),l(p,{modelValue:n(a).description,"onUpdate:modelValue":o[1]||(o[1]=t=>n(a).description=t),label:"Mô tả",name:"Mô tả",type:"textarea"},null,8,["modelValue"]),l(p,{modelValue:n(a).requirement,"onUpdate:modelValue":o[2]||(o[2]=t=>n(a).requirement=t),label:"Yêu cầu",name:"Yêu cầu"},null,8,["modelValue"]),l(p,{modelValue:n(a).knowledge,"onUpdate:modelValue":o[3]||(o[3]=t=>n(a).knowledge=t),label:"Kiến thức kỹ năng",name:"Kiến thức kỹ năng"},null,8,["modelValue"])]),_:1}))}}),E={class:"d-flex flex-column flex-grow-1 h-full"},R={class:"d-flex items-center"},X={class:"mt-2 h-[calc(100%_-_45px)] overflow-y-hidden"},he=B({__name:"index",setup(_){const c=[{title:"STT",align:"center",sortable:!1,key:"index",width:50},{title:"Tên đề tài",key:"ten",width:"20%",minWidth:250},{title:"Mô tả",key:"description",width:"30%",minWidth:350},{title:"Yêu cầu",key:"requirement",width:"15%",minWidth:150},{title:"Kiến thức kỹ năng",key:"knowledge",width:"15%",minWidth:150},{title:"GVHD",key:"gv",width:"10%",minWidth:100},{title:"Số lượng",key:"numberStudent",align:"center"},{title:"Trạng thái",key:"status",width:"10%",minWidth:100,align:"center"},{title:"",key:"action",width:30}],g=h({page:1,rowsPerPage:25,sortBy:"-created_at",sortType:"asc"}),a=h({viewAll:!1}),f=z(()=>({...g.value,filters:a.value}));q();const{data:V}=D(),{items:m,totalItems:w,isLoading:x,refetch:U}=G(f);return(o,t)=>(v(),M("div",E,[t[4]||(t[4]=s("div",{class:"text-lg font-bold text-uppercase"},"Quản lý đề tài",-1)),l(H,{class:"pa-3 h-full",color:"white",variant:"flat"},{default:i(()=>[s("div",R,[l(S,{"min-width":"400",width:"40%"},{activator:i(({props:e})=>[l(T,C({color:"success",size:"small"},e),{default:i(()=>[l(b,null,{default:i(()=>t[1]||(t[1]=[$("mdi-plus")])),_:1}),t[2]||(t[2]=s("span",null,"Thêm mới đề tài",-1))]),_:2},1040)]),default:i(({isActive:e})=>[l(W,{onCancel:r=>e.value=!1},null,8,["onCancel"])]),_:1}),l(P),l(I,{modelValue:n(a).viewAll,"onUpdate:modelValue":t[0]||(t[0]=e=>n(a).viewAll=e),density:"compact","hide-details":"",label:"Xem tất cả"},null,8,["modelValue"])]),s("div",X,[l(L,{class:"h-full","fixed-header":"",headers:c,items:n(m)},{"item.index":i(({index:e})=>[s("span",null,d(e+1),1)]),"item.gv":i(({item:e})=>{var r,u;return[s("span",null,d((r=e.teacher)==null?void 0:r.hodem)+" "+d((u=e.teacher)==null?void 0:u.ten),1)]}),"item.numberStudent":i(({item:e})=>[s("span",null,"x/"+d(e.numberStudent),1)]),"item.status":i(({item:e})=>[l(O,{color:n(k).statusColor(e.status),size:"small",variant:"flat"},{default:i(()=>[s("span",null,d(n(k).statusType(e.status)),1)]),_:2},1032,["color"])]),"item.action":i(({item:e})=>[l(S,{"min-width":"400",width:"40%"},{activator:i(({props:r})=>{var u,y;return[((u=n(V))==null?void 0:u.id)==((y=e==null?void 0:e.teacher)==null?void 0:y.id)?(v(),A(T,C({key:0},r,{color:"success",icon:"",size:"small",variant:"text"}),{default:i(()=>[l(b,null,{default:i(()=>t[3]||(t[3]=[$("mdi-pencil")])),_:1})]),_:2},1040)):Q("",!0)]}),default:i(({isActive:r})=>[l(j,{topic:e,onCancel:u=>r.value=!1},null,8,["topic","onCancel"])]),_:2},1024),l(Y,{topic:e},null,8,["topic"])]),_:1},8,["items"])])]),_:1})]))}});export{he as default};
