import{m as ue,a as ie,c as ce,b as me,d as ge,u as he,p as ve,e as be,f as fe,g as ye,h as pe,i as Ve,j as Te,k as x,l as D,n as I,o as xe}from"./BucRdiyx.js";import{m as De,a as Ie,u as we,b as Se,V as Re}from"./Cuta4Q8k.js";import{$ as Pe,a2 as ke,aN as Be,ax as o,i as v,ag as w,az as Fe,a4 as Ge,z as t,as as b,P as m}from"./C5o3XgM8.js";const Ee=Pe({...ue(),...ie(),...De(),...Ie()},"VDataTableVirtual"),Oe=ke()({name:"VDataTableVirtual",props:Ee(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,S){let{attrs:R,slots:a}=S;const{groupBy:d}=ce(e),{sortBy:u,multiSort:P,mustSort:k}=me(e),{disableSort:B}=Be(e),{columns:i,headers:F,filterFunctions:G,sortFunctions:E,sortRawFunctions:H}=ge(e,{groupBy:d,showSelect:o(e,"showSelect"),showExpand:o(e,"showExpand")}),{items:N}=he(e,i),f=o(e,"search"),{filteredItems:z}=we(e,N,f,{transform:l=>l.columns,customKeyFilter:G}),{toggleSort:O}=ve({sortBy:u,multiSort:P,mustSort:k}),{sortByWithGroups:U,opened:_,extractRows:j,isGroupOpen:A,toggleGroup:C}=be({groupBy:d,sortBy:u,disableSort:B}),{sortedItems:K}=fe(e,z,U,{transform:l=>({...l.raw,...l.columns}),sortFunctions:E,sortRawFunctions:H}),{flatItems:g}=ye(K,d,_),c=v(()=>j(g.value)),{isSelected:W,select:$,selectAll:q,toggleSelect:J,someSelected:L,allSelected:M}=pe(e,{allItems:c,currentPage:c}),{isExpanded:Q,toggleExpand:X}=Ve(e),{containerRef:Y,markerRef:Z,paddingTop:ee,paddingBottom:ae,computedItems:te,handleItemResize:le,handleScroll:se,handleScrollend:oe}=Se(e,g),re=v(()=>te.value.map(l=>l.raw));Te({sortBy:u,page:w(1),itemsPerPage:w(-1),groupBy:d,search:f}),Fe({VDataTableRows:{hideNoData:o(e,"hideNoData"),noDataText:o(e,"noDataText"),loading:o(e,"loading"),loadingText:o(e,"loadingText")}});const n=v(()=>({sortBy:u.value,toggleSort:O,someSelected:L.value,allSelected:M.value,isSelected:W,select:$,selectAll:q,toggleSelect:J,isExpanded:Q,toggleExpand:X,isGroupOpen:A,toggleGroup:C,items:c.value.map(l=>l.raw),internalItems:c.value,groupedItems:g.value,columns:i.value,headers:F.value}));Ge(()=>{const l=x.filterProps(e),ne=D.filterProps(e),de=I.filterProps(e);return t(I,m({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},de),{top:()=>{var s;return(s=a.top)==null?void 0:s.call(a,n.value)},wrapper:()=>{var s,y,p;return t("div",{ref:Y,onScrollPassive:se,onScrollend:oe,class:"v-table__wrapper",style:{height:b(e.height)}},[t("table",null,[(s=a.colgroup)==null?void 0:s.call(a,n.value),!e.hideDefaultHeader&&t("thead",{key:"thead"},[t(x,m(l,{sticky:e.fixedHeader}),a)]),!e.hideDefaultBody&&t("tbody",null,[t("tr",{ref:Z,style:{height:b(ee.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)]),(y=a["body.prepend"])==null?void 0:y.call(a,n.value),t(D,m(R,ne,{items:re.value}),{...a,item:r=>t(Re,{key:r.internalItem.index,renderless:!0,"onUpdate:height":h=>le(r.internalItem.index,h)},{default:h=>{var T;let{itemRef:V}=h;return((T=a.item)==null?void 0:T.call(a,{...r,itemRef:V}))??t(xe,m(r.props,{ref:V,key:r.internalItem.index,index:r.internalItem.index}),a)}})}),(p=a["body.append"])==null?void 0:p.call(a,n.value),t("tr",{style:{height:b(ae.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)])])])])},bottom:()=>{var s;return(s=a.bottom)==null?void 0:s.call(a,n.value)}})})}});export{Oe as V};
