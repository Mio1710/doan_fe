import{_ as U}from"./CEgz0wSR.js";import{f as k}from"./D-3jeY6D.js";import{d as B,r as h,a as q,P as W,t as v,L as A,A as n,z as l,M as i,i as z,Z as D,v as M,x as s,R as T,Q as b,V as C,B as S,S as P,y as d,T as Q}from"./CFiehynL.js";import{_ as K}from"./1adOK-vi.js";import{_ as p}from"./BjrrArms.js";import{_ as Y}from"./DSlFav-d.js";import{u as G}from"./BMYoRmek.js";import{V as H}from"./DBYuLB8G.js";import{V as $}from"./DnFUZBxv.js";import{V as I}from"./DmOymFtB.js";import{V as L}from"./BIjFgQMf.js";import{V as O}from"./D00urTNM.js";import"./nflsgOpI.js";import"./VaKneH-D.js";import"./DZ_F3gcz.js";import"./BBJD5s-R.js";import"./CZ9s_aoN.js";import"./CISklGHC.js";import"./CN8nOB4F.js";const j=B({__name:"UpdateTopic",props:{topic:{type:Object,required:!0}},emits:["cancel"],setup(_,{emit:c}){const a=h({..._.topic}),{$api:f,$toast:V}=q(),m=c,w=W(),y=()=>{a.value.status!=="approved"&&(a.value.status="pending"),f.topic.updateTopic(a.value.id,a.value).then(()=>{V.success("Tạo đề tài thành công"),w.invalidateQueries("topic"),m("cancel")})};return(N,o)=>(v(),A(K,{"can-cancel":"","cancel-text":"Hủy",title:"Cập nhật đề tài",onCancel:o[4]||(o[4]=t=>m("cancel")),onSubmit:y},{default:n(()=>[l(p,{modelValue:i(a).ten,"onUpdate:modelValue":o[0]||(o[0]=t=>i(a).ten=t),label:"Tên đề tài",name:"Tên đề tài",rules:"required"},null,8,["modelValue"]),l(p,{modelValue:i(a).description,"onUpdate:modelValue":o[1]||(o[1]=t=>i(a).description=t),label:"Mô tả",name:"Mô tả",type:"textarea"},null,8,["modelValue"]),l(p,{modelValue:i(a).requirement,"onUpdate:modelValue":o[2]||(o[2]=t=>i(a).requirement=t),label:"Yêu cầu",name:"Yêu cầu"},null,8,["modelValue"]),l(p,{modelValue:i(a).knowledge,"onUpdate:modelValue":o[3]||(o[3]=t=>i(a).knowledge=t),label:"Kiến thức kỹ năng",name:"Kiến thức kỹ năng"},null,8,["modelValue"])]),_:1}))}}),E={class:"d-flex flex-column flex-grow-1 h-full"},R={class:"d-flex items-center"},X={class:"mt-2 h-[calc(100%_-_45px)] overflow-y-hidden"},he=B({__name:"index",setup(_){const c=[{title:"STT",align:"center",sortable:!1,key:"index",width:50},{title:"Tên đề tài",key:"ten",width:"20%",minWidth:250},{title:"Mô tả",key:"description",width:"30%",minWidth:350},{title:"Yêu cầu",key:"requirement",width:"15%",minWidth:150},{title:"Kiến thức kỹ năng",key:"knowledge",width:"15%",minWidth:150},{title:"GVHD",key:"gv",width:"10%",minWidth:100},{title:"Số lượng",key:"numberStudent",align:"center"},{title:"Trạng thái",key:"status",width:"10%",minWidth:100,align:"center"},{title:"",key:"action",width:30}],g=h({page:1,rowsPerPage:25,sortBy:"-created_at",sortType:"asc"}),a=h({viewAll:!1}),f=z(()=>({...g.value,filters:a.value}));q();const{data:V}=D(),{items:m,totalItems:w,isLoading:y,refetch:N}=G(f);return(o,t)=>(v(),M("div",E,[t[4]||(t[4]=s("div",{class:"text-lg font-bold text-uppercase"},"Quản lý đề tài",-1)),l(H,{class:"pa-3 h-full",color:"white",variant:"flat"},{default:n(()=>[s("div",R,[l($,{"min-width":"400",width:"40%"},{activator:n(({props:e})=>[l(T,b({color:"success",size:"small"},e),{default:n(()=>[l(C,null,{default:n(()=>t[1]||(t[1]=[S("mdi-plus")])),_:1}),t[2]||(t[2]=s("span",null,"Thêm mới đề tài",-1))]),_:2},1040)]),default:n(({isActive:e})=>[l(U,{onCancel:r=>e.value=!1},null,8,["onCancel"])]),_:1}),l(P),l(I,{modelValue:i(a).viewAll,"onUpdate:modelValue":t[0]||(t[0]=e=>i(a).viewAll=e),density:"compact","hide-details":"",label:"Xem tất cả"},null,8,["modelValue"])]),s("div",X,[l(L,{class:"h-full","fixed-header":"",headers:c,items:i(m)},{"item.index":n(({index:e})=>[s("span",null,d(e+1),1)]),"item.gv":n(({item:e})=>{var r,u;return[s("span",null,d((r=e.teacher)==null?void 0:r.hodem)+" "+d((u=e.teacher)==null?void 0:u.ten),1)]}),"item.numberStudent":n(({item:e})=>[s("span",null,d(e.currentNumberStudent)+"/"+d(e.numberStudent),1)]),"item.status":n(({item:e})=>[l(O,{color:i(k).statusColor(e.status),size:"small",variant:"flat"},{default:n(()=>[s("span",null,d(i(k).statusType(e.status)),1)]),_:2},1032,["color"])]),"item.action":n(({item:e})=>[l($,{"min-width":"400",width:"40%"},{activator:n(({props:r})=>{var u,x;return[((u=i(V))==null?void 0:u.id)==((x=e==null?void 0:e.teacher)==null?void 0:x.id)?(v(),A(T,b({key:0},r,{color:"success",icon:"",size:"small",variant:"text"}),{default:n(()=>[l(C,null,{default:n(()=>t[3]||(t[3]=[S("mdi-pencil")])),_:1})]),_:2},1040)):Q("",!0)]}),default:n(({isActive:r})=>[l(j,{topic:e,onCancel:u=>r.value=!1},null,8,["topic","onCancel"])]),_:2},1024),l(Y,{topic:e},null,8,["topic"])]),_:1},8,["items"])])]),_:1})]))}});export{he as default};
