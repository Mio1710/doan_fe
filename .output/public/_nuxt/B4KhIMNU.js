import{$ as le,aB as ie,bw as $,bR as ae,a2 as oe,ae as se,al as ue,aD as re,i as y,c6 as E,r as k,F as ce,a4 as de,aG as fe,aH as M,bS as ye,z as r,bT as ve,P as C,K as V,bV as me,a5 as he,at as Ae,bW as pe}from"./C5o3XgM8.js";import{V as be}from"./ClqTeD8V.js";function w(e){return e===void 0}function Ie(e){return e===null}function Fe(e){return typeof e=="boolean"}function b(e){return e===Object(e)}function U(e){return Array.isArray(e)}function ke(e){return e instanceof Date}function x(e,t){return t?b(e)&&!w(e.uri):b(e)&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.slice=="function"}function Ce(e,t){return x(e,t)&&typeof e.name=="string"&&(b(e.lastModifiedDate)||typeof e.lastModified=="number")}function v(e){return w(e)?!1:e}function S(e,t,a,o){t=t||{},a=a||new FormData,t.indices=v(t.indices),t.nullsAsUndefineds=v(t.nullsAsUndefineds),t.booleansAsIntegers=v(t.booleansAsIntegers),t.allowEmptyArrays=v(t.allowEmptyArrays),t.noAttributesWithArrayNotation=v(t.noAttributesWithArrayNotation),t.noFilesWithArrayNotation=v(t.noFilesWithArrayNotation),t.dotsForObjectNotation=v(t.dotsForObjectNotation);const u=typeof a.getParts=="function";return w(e)||(Ie(e)?t.nullsAsUndefineds||a.append(o,""):Fe(e)?t.booleansAsIntegers?a.append(o,e?1:0):a.append(o,e):U(e)?e.length?e.forEach((l,s)=>{let c=o+"["+(t.indices?s:"")+"]";(t.noAttributesWithArrayNotation||t.noFilesWithArrayNotation&&Ce(l,u))&&(c=o),S(l,t,a,c)}):t.allowEmptyArrays&&a.append(t.noAttributesWithArrayNotation?o:o+"[]",""):ke(e)?a.append(o,e.toISOString()):b(e)&&!x(e,u)?Object.keys(e).forEach(l=>{const s=e[l];if(U(s))for(;l.length>2&&l.lastIndexOf("[]")===l.length-2;)l=l.substring(0,l.length-2);const c=o?t.dotsForObjectNotation?o+"."+l:o+"["+l+"]":l;S(s,t,a,c)}):a.append(o,e)),a}var Pe={serialize:S};const Ve=le({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...ie({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>$(e).every(t=>t!=null&&typeof t=="object")},...ae({clearable:!0})},"VFileInput"),ze=oe()({name:"VFileInput",inheritAttrs:!1,props:Ve(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:a,emit:o,slots:u}=t;const{t:l}=se(),s=ue(e,"modelValue",e.modelValue,n=>$(n),n=>!e.multiple&&Array.isArray(n)?n[0]:n),{isFocused:c,focus:T,blur:G}=re(e),N=y(()=>typeof e.showSize!="boolean"?e.showSize:void 0),P=y(()=>(s.value??[]).reduce((n,i)=>{let{size:m=0}=i;return n+m},0)),z=y(()=>E(P.value,N.value)),I=y(()=>(s.value??[]).map(n=>{const{name:i="",size:m=0}=n;return e.showSize?`${i} (${E(m,N.value)})`:i})),H=y(()=>{var i;const n=((i=s.value)==null?void 0:i.length)??0;return e.showSize?l(e.counterSizeString,n,z.value):l(e.counterString,n)}),B=k(),R=k(),d=k(),K=y(()=>c.value||e.active),O=y(()=>["plain","underlined"].includes(e.variant));function F(){var n;d.value!==document.activeElement&&((n=d.value)==null||n.focus()),c.value||T()}function L(n){var i;(i=d.value)==null||i.click()}function _(n){o("mousedown:control",n)}function q(n){var i;(i=d.value)==null||i.click(),o("click:control",n)}function J(n){n.stopPropagation(),F(),Ae(()=>{s.value=[],pe(e["onClick:clear"],n)})}return ce(s,n=>{(!Array.isArray(n)||!n.length)&&d.value&&(d.value.value="")}),de(()=>{const n=!!(u.counter||e.counter),i=!!(n||u.details),[m,Q]=fe(a),{modelValue:Se,...X}=M.filterProps(e),Y=ye(e);return r(M,C({ref:B,modelValue:s.value,"onUpdate:modelValue":h=>s.value=h,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":O.value},e.class],style:e.style,"onClick:prepend":L},m,X,{centerAffix:!O.value,focused:c.value}),{...u,default:h=>{let{id:p,isDisabled:A,isDirty:D,isReadonly:g,isValid:Z}=h;return r(ve,C({ref:R,"prepend-icon":e.prependIcon,onMousedown:_,onClick:q,"onClick:clear":J,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Y,{id:p.value,active:K.value||D.value,dirty:D.value||e.dirty,disabled:A.value,focused:c.value,error:Z.value===!1}),{...u,default:j=>{var W;let{props:{class:ee,...te}}=j;return r(V,null,[r("input",C({ref:d,type:"file",readonly:g.value,disabled:A.value,multiple:e.multiple,name:e.name,onClick:f=>{f.stopPropagation(),g.value&&f.preventDefault(),F()},onChange:f=>{if(!f.target)return;const ne=f.target;s.value=[...ne.files??[]]},onFocus:F,onBlur:G},te,Q),null),r("div",{class:ee},[!!((W=s.value)!=null&&W.length)&&!e.hideInput&&(u.selection?u.selection({fileNames:I.value,totalBytes:P.value,totalBytesReadable:z.value}):e.chips?I.value.map(f=>r(be,{key:f,size:"small",text:f},null)):I.value.join(", "))])])}})},details:i?h=>{var p,A;return r(V,null,[(p=u.details)==null?void 0:p.call(u,h),n&&r(V,null,[r("span",null,null),r(me,{active:!!((A=s.value)!=null&&A.length),value:H.value,disabled:e.disabled},u.counter)])])}:void 0})}),he({},B,R,d)}});export{ze as V,Pe as s};
