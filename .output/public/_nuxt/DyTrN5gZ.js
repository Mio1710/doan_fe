import{m as ue,b as ie,c as ce,d as me,e as he,u as ve,p as ge,f as be,g as ye,h as fe,i as pe,j as Te,k as Ve,l as x,n as D,a as I,o as xe}from"./BZFDvjCY.js";import{a as De,m as Ie,u as we,b as Se,c as Re}from"./Dk9QRMfY.js";import{a0 as Pe,a3 as ke,bC as Be,ay as o,i as g,ah as w,aA as Fe,a5 as Ge,z as t,at as b,P as m}from"./WipKja2Z.js";const Ee=Pe({...ue(),...ie(),...De(),...Ie()},"VDataTableVirtual"),Ae=ke()({name:"VDataTableVirtual",props:Ee(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,S){let{attrs:R,slots:a}=S;const{groupBy:d}=ce(e),{sortBy:u,multiSort:P,mustSort:k}=me(e),{disableSort:B}=Be(e),{columns:i,headers:F,filterFunctions:G,sortFunctions:E,sortRawFunctions:H}=he(e,{groupBy:d,showSelect:o(e,"showSelect"),showExpand:o(e,"showExpand")}),{items:N}=ve(e,i),y=o(e,"search"),{filteredItems:z}=we(e,N,y,{transform:l=>l.columns,customKeyFilter:G}),{toggleSort:A}=ge({sortBy:u,multiSort:P,mustSort:k}),{sortByWithGroups:C,opened:O,extractRows:U,isGroupOpen:_,toggleGroup:j}=be({groupBy:d,sortBy:u,disableSort:B}),{sortedItems:K}=ye(e,z,C,{transform:l=>({...l.raw,...l.columns}),sortFunctions:E,sortRawFunctions:H}),{flatItems:h}=fe(K,d,O),c=g(()=>U(h.value)),{isSelected:W,select:q,selectAll:J,toggleSelect:L,someSelected:M,allSelected:Q}=pe(e,{allItems:c,currentPage:c}),{isExpanded:X,toggleExpand:Y}=Te(e),{containerRef:Z,markerRef:$,paddingTop:ee,paddingBottom:ae,computedItems:te,handleItemResize:le,handleScroll:se,handleScrollend:oe}=Se(e,h),re=g(()=>te.value.map(l=>l.raw));Ve({sortBy:u,page:w(1),itemsPerPage:w(-1),groupBy:d,search:y}),Fe({VDataTableRows:{hideNoData:o(e,"hideNoData"),noDataText:o(e,"noDataText"),loading:o(e,"loading"),loadingText:o(e,"loadingText")}});const n=g(()=>({sortBy:u.value,toggleSort:A,someSelected:M.value,allSelected:Q.value,isSelected:W,select:q,selectAll:J,toggleSelect:L,isExpanded:X,toggleExpand:Y,isGroupOpen:_,toggleGroup:j,items:c.value.map(l=>l.raw),internalItems:c.value,groupedItems:h.value,columns:i.value,headers:F.value}));Ge(()=>{const l=x.filterProps(e),ne=D.filterProps(e),de=I.filterProps(e);return t(I,m({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},de),{top:()=>{var s;return(s=a.top)==null?void 0:s.call(a,n.value)},wrapper:()=>{var s,f,p;return t("div",{ref:Z,onScrollPassive:se,onScrollend:oe,class:"v-table__wrapper",style:{height:b(e.height)}},[t("table",null,[(s=a.colgroup)==null?void 0:s.call(a,n.value),!e.hideDefaultHeader&&t("thead",{key:"thead"},[t(x,m(l,{sticky:e.fixedHeader}),a)]),!e.hideDefaultBody&&t("tbody",null,[t("tr",{ref:$,style:{height:b(ee.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)]),(f=a["body.prepend"])==null?void 0:f.call(a,n.value),t(D,m(R,ne,{items:re.value}),{...a,item:r=>t(Re,{key:r.internalItem.index,renderless:!0,"onUpdate:height":v=>le(r.internalItem.index,v)},{default:v=>{var V;let{itemRef:T}=v;return((V=a.item)==null?void 0:V.call(a,{...r,itemRef:T}))??t(xe,m(r.props,{ref:T,key:r.internalItem.index,index:r.internalItem.index}),a)}})}),(p=a["body.append"])==null?void 0:p.call(a,n.value),t("tr",{style:{height:b(ae.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)])])])])},bottom:()=>{var s;return(s=a.bottom)==null?void 0:s.call(a,n.value)}})})}});export{Ae as V};
