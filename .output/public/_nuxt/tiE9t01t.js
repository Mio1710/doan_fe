import{a0 as le,aC as ie,bx as x,bT as ae,a3 as oe,af as se,am as ue,aE as re,i as y,c8 as M,r as k,F as ce,a5 as de,aH as fe,aI as U,bU as ye,z as r,bV as me,Q as C,K as V,bX as ve,a6 as he,au as Ae,bY as pe}from"./CqP_eWgs.js";import{V as be}from"./Debhx5xt.js";function N(e){return e===void 0}function Ie(e){return e===null}function Fe(e){return typeof e=="boolean"}function b(e){return e===Object(e)}function W(e){return Array.isArray(e)}function ke(e){return e instanceof Date}function $(e,t){return t?b(e)&&!N(e.uri):b(e)&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.slice=="function"}function Ce(e,t){return $(e,t)&&typeof e.name=="string"&&(b(e.lastModifiedDate)||typeof e.lastModified=="number")}function m(e){return N(e)?!1:e}function S(e,t,a,o){t=t||{},a=a||new FormData,t.indices=m(t.indices),t.nullsAsUndefineds=m(t.nullsAsUndefineds),t.booleansAsIntegers=m(t.booleansAsIntegers),t.allowEmptyArrays=m(t.allowEmptyArrays),t.noAttributesWithArrayNotation=m(t.noAttributesWithArrayNotation),t.noFilesWithArrayNotation=m(t.noFilesWithArrayNotation),t.dotsForObjectNotation=m(t.dotsForObjectNotation);const u=typeof a.getParts=="function";return N(e)||(Ie(e)?t.nullsAsUndefineds||a.append(o,""):Fe(e)?t.booleansAsIntegers?a.append(o,e?1:0):a.append(o,e):W(e)?e.length?e.forEach((l,s)=>{let c=o+"["+(t.indices?s:"")+"]";(t.noAttributesWithArrayNotation||t.noFilesWithArrayNotation&&Ce(l,u))&&(c=o),S(l,t,a,c)}):t.allowEmptyArrays&&a.append(t.noAttributesWithArrayNotation?o:o+"[]",""):ke(e)?a.append(o,e.toISOString()):b(e)&&!$(e,u)?Object.keys(e).forEach(l=>{const s=e[l];if(W(s))for(;l.length>2&&l.lastIndexOf("[]")===l.length-2;)l=l.substring(0,l.length-2);const c=o?t.dotsForObjectNotation?o+"."+l:o+"["+l+"]":l;S(s,t,a,c)}):a.append(o,e)),a}var ze={serialize:S};const Ve=le({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...ie({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>x(e).every(t=>t!=null&&typeof t=="object")},...ae({clearable:!0})},"VFileInput"),Pe=oe()({name:"VFileInput",inheritAttrs:!1,props:Ve(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:a,emit:o,slots:u}=t;const{t:l}=se(),s=ue(e,"modelValue",e.modelValue,n=>x(n),n=>!e.multiple&&Array.isArray(n)?n[0]:n),{isFocused:c,focus:T,blur:H}=re(e),w=y(()=>typeof e.showSize!="boolean"?e.showSize:void 0),z=y(()=>(s.value??[]).reduce((n,i)=>{let{size:v=0}=i;return n+v},0)),P=y(()=>M(z.value,w.value)),I=y(()=>(s.value??[]).map(n=>{const{name:i="",size:v=0}=n;return e.showSize?`${i} (${M(v,w.value)})`:i})),K=y(()=>{var i;const n=((i=s.value)==null?void 0:i.length)??0;return e.showSize?l(e.counterSizeString,n,P.value):l(e.counterString,n)}),B=k(),R=k(),d=k(),L=y(()=>c.value||e.active),O=y(()=>["plain","underlined"].includes(e.variant));function F(){var n;d.value!==document.activeElement&&((n=d.value)==null||n.focus()),c.value||T()}function Q(n){var i;(i=d.value)==null||i.click()}function X(n){o("mousedown:control",n)}function Y(n){var i;(i=d.value)==null||i.click(),o("click:control",n)}function _(n){n.stopPropagation(),F(),Ae(()=>{s.value=[],pe(e["onClick:clear"],n)})}return ce(s,n=>{(!Array.isArray(n)||!n.length)&&d.value&&(d.value.value="")}),de(()=>{const n=!!(u.counter||e.counter),i=!!(n||u.details),[v,q]=fe(a),{modelValue:Se,...G}=U.filterProps(e),J=ye(e);return r(U,C({ref:B,modelValue:s.value,"onUpdate:modelValue":h=>s.value=h,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":O.value},e.class],style:e.style,"onClick:prepend":Q},v,G,{centerAffix:!O.value,focused:c.value}),{...u,default:h=>{let{id:p,isDisabled:A,isDirty:g,isReadonly:D,isValid:Z}=h;return r(me,C({ref:R,"prepend-icon":e.prependIcon,onMousedown:X,onClick:Y,"onClick:clear":_,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},J,{id:p.value,active:L.value||g.value,dirty:g.value||e.dirty,disabled:A.value,focused:c.value,error:Z.value===!1}),{...u,default:j=>{var E;let{props:{class:ee,...te}}=j;return r(V,null,[r("input",C({ref:d,type:"file",readonly:D.value,disabled:A.value,multiple:e.multiple,name:e.name,onClick:f=>{f.stopPropagation(),D.value&&f.preventDefault(),F()},onChange:f=>{if(!f.target)return;const ne=f.target;s.value=[...ne.files??[]]},onFocus:F,onBlur:H},te,q),null),r("div",{class:ee},[!!((E=s.value)!=null&&E.length)&&!e.hideInput&&(u.selection?u.selection({fileNames:I.value,totalBytes:z.value,totalBytesReadable:P.value}):e.chips?I.value.map(f=>r(be,{key:f,size:"small",text:f},null)):I.value.join(", "))])])}})},details:i?h=>{var p,A;return r(V,null,[(p=u.details)==null?void 0:p.call(u,h),n&&r(V,null,[r("span",null,null),r(ve,{active:!!((A=s.value)!=null&&A.length),value:K.value,disabled:e.disabled},u.counter)])])}:void 0})}),he({},B,R,d)}});export{Pe as V,ze as s};
