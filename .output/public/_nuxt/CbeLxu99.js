import{a as T,O as M,i as U,d as N,$ as R,r as w,P as z,t as c,v,x as l,z as o,A as d,M as e,L as C,R as h,B as b,T as g,y as i,S as A,V as G}from"./CFiehynL.js";import{f as _}from"./D-3jeY6D.js";import{_ as V}from"./BjrrArms.js";import{A as Q}from"./nflsgOpI.js";import{_ as S}from"./0ypHXRhZ.js";import{V as L}from"./DBYuLB8G.js";import{V as j}from"./D00urTNM.js";import"./BpPFgCOB.js";import"./DZ_F3gcz.js";import"./nS_MEcBz.js";import"./CISklGHC.js";import"./CN8nOB4F.js";import"./VaKneH-D.js";import"./BBJD5s-R.js";function F(x,s){const{$api:f}=T(),u=M(["my-recommend-topic",x],()=>f.topic.getMyRecommendTopic(),{refetchOnWindowFocus:!1,...s}),r=U(()=>{var m;return((m=u.data.value)==null?void 0:m.data[0])||null});return{...u,items:r}}const O={class:"d-flex flex-column flex-grow-1 h-full"},D={class:"text-center"},E={key:1,class:"d-flex flex-column gap-4"},I={class:"d-flex"},P={key:0},ue=N({__name:"recommend-topic",setup(x){const s=R({ten:"",description:"",requirement:"",knowledge:"",teacher_id:null,status:"pending"}),{$api:f,$toast:u}=T(),r=w(!1),m=z(),q=()=>{if(r.value=!0,p.value){f.topic.updateRecommendTopic(n.value.id,s).then(()=>{u.success("Cập nhật đề tài thành công"),m.invalidateQueries("my-recommend-topic"),p.value=!1}).finally(()=>{r.value=!1});return}f.topic.createRecommendTopic(s).then(()=>{u.success("Đăng ký đề tài thành công"),m.invalidateQueries("my-recommend-topic")}),r.value=!1},p=w(!1),$=()=>{p.value=!0,s.ten=n.value.ten,s.description=n.value.description,s.teacher_id=n.value.teacher_id,s.knowledge=n.value.knowledge},{items:n,isLoading:W,refetch:H}=F();return(J,t)=>(c(),v("div",O,[t[11]||(t[11]=l("div",{class:"text-lg font-bold text-uppercase"},"Đề xuất đề tài đồ án",-1)),o(L,{class:"pa-3 h-full",color:"white",variant:"flat"},{default:d(()=>{var k,y;return[!e(n)||e(p)?(c(),C(Q,{key:0},{default:d(({handleSubmit:B})=>[o(V,{modelValue:e(s).ten,"onUpdate:modelValue":t[0]||(t[0]=a=>e(s).ten=a),label:"Tên đề tài",name:"Tên đề tài",rules:"required"},null,8,["modelValue"]),o(V,{modelValue:e(s).description,"onUpdate:modelValue":t[1]||(t[1]=a=>e(s).description=a),label:"Mô tả",name:"Mô tả",rules:"required",type:"textarea"},null,8,["modelValue"]),o(S,{modelValue:e(s).teacher_id,"onUpdate:modelValue":t[2]||(t[2]=a=>e(s).teacher_id=a),class:"mb-4",label:"Giảng viên",name:"Giảng viên",rules:"required"},null,8,["modelValue"]),o(V,{modelValue:e(s).knowledge,"onUpdate:modelValue":t[3]||(t[3]=a=>e(s).knowledge=a),label:"Công nghệ sử dụng",name:"Công nghệ sử dụng",rules:"required"},null,8,["modelValue"]),l("div",D,[o(h,{color:"success",loading:e(r),size:"small",variant:"elevated",onClick:a=>B(q)},{default:d(()=>t[4]||(t[4]=[b(" Đăng ký ")])),_:2},1032,["loading","onClick"])])]),_:1})):g("",!0),e(n)&&!e(p)?(c(),v("div",E,[l("div",I,[o(j,{color:e(_).statusColor(e(n).status),size:"small",variant:"flat"},{default:d(()=>[l("span",null,i(e(_).statusType(e(n).status)),1)]),_:1},8,["color"]),o(A),e(n).status!="approved"?(c(),C(h,{key:0,color:"success",icon:"",size:"x-small",variant:"text",onClick:$},{default:d(()=>[o(G,null,{default:d(()=>t[5]||(t[5]=[b("mdi-pencil")])),_:1})]),_:1})):g("",!0)]),l("div",null,[t[6]||(t[6]=l("span",{class:"font-weight-bold mr-2"},"Tên đề tài đề xuất:",-1)),l("span",null,i(e(n).ten),1)]),l("div",null,[t[7]||(t[7]=l("span",{class:"font-weight-bold mr-2"},"Mô tả:",-1)),l("span",null,i(e(n).description),1)]),l("div",null,[t[8]||(t[8]=l("span",{class:"font-weight-bold mr-2"},"Giảng viên:",-1)),l("span",null,i((k=e(n).teacher)==null?void 0:k.hodem)+" "+i((y=e(n).teacher)==null?void 0:y.ten),1)]),l("div",null,[t[9]||(t[9]=l("span",{class:"font-weight-bold mr-2"},"Công nghệ sử dụng:",-1)),l("span",null,i(e(n).knowledge),1)]),e(n).status=="rejected"?(c(),v("div",P,[t[10]||(t[10]=l("span",{class:"font-weight-bold mr-2"},"Lý do từ chối đề tài:",-1)),l("span",null,i(e(n).reject_reason),1)])):g("",!0)])):g("",!0)]}),_:1})]))}});export{ue as default};
